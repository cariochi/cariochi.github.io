<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>EXPRESSO · CARIOCHI</title>
    <link rel="icon" type="image/svg+xml" href="/assets/images/favicon.svg">
    <link rel="shortcut icon"type="image/svg+xml" href="/assets/images/favicon.svg"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>EXPRESSO | CARIOCHI</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="EXPRESSO" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Documentation hub for Reflecto, Objecto, Recordo, Expresso" />
<meta property="og:description" content="Documentation hub for Reflecto, Objecto, Recordo, Expresso" />
<link rel="canonical" href="https://cariochi.github.io/expresso/" />
<meta property="og:url" content="https://cariochi.github.io/expresso/" />
<meta property="og:site_name" content="CARIOCHI" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="EXPRESSO" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Documentation hub for Reflecto, Objecto, Recordo, Expresso","headline":"EXPRESSO","url":"https://cariochi.github.io/expresso/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/rouge.css">
    <link rel="stylesheet" href="/assets/css/site.css"/>
</head>
<body><header class="site-header">
    <div class="container">
        <a class="brand" href="/">
            <img src="/assets/images/logo.svg" alt="CARIOCHI"/>
<!--            <span>CARIOCHI</span>-->
        </a>

        <input type="checkbox" id="nav-toggle" class="nav-toggle" aria-label="Toggle navigation">

        <label for="nav-toggle" class="menu-toggle">
            <svg class="burger" viewBox="0 0 24 24" width="20" height="20" aria-hidden="true">
                <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" fill="none"/>
            </svg>
            <span class="menu-text">Menu</span>
        </label>

        <nav class="top-nav" aria-label="Projects">
            <ul><li>
                <a href="/reflecto">REFLECTO</a>
                </li><li>
                <a href="/objecto">OBJECTO</a>
                </li><li>
                <a href="/recordo">RECORDO</a>
                </li><li>
                <a href="/spec">WEB SPEC</a>
                </li><li class="active">
                <a href="/expresso">EXPRESSO</a>
                </li></ul>
        </nav><a class="header-github" href="https://expresso.cariochi.com" target="_blank" rel="noopener"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" fill="currentColor">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
                <polygon points="10,8 16,12 10,16" fill="currentColor"/>
            </svg><span class="github-text">LIVE DEMO</span>
        </a></div>
</header>
<main class="container">
    <div class="grid">
    <aside class="toc toc-desktop" aria-label="Table of contents">
    <div class="toc-inner">
        <h3>EXPRESSO </h3>
        <ul id="toc" class="section-nav">
<li class="toc-entry toc-h1"><a href="#introduction">Introduction</a>
<ul>
<li class="toc-entry toc-h2"><a href="#what-expresso-is">What Expresso is</a></li>
<li class="toc-entry toc-h2"><a href="#what-expresso-is-not">What Expresso is not</a></li>
<li class="toc-entry toc-h2"><a href="#why-it-matters">Why it matters</a></li>
<li class="toc-entry toc-h2"><a href="#positioning">Positioning</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#installation--setup">Installation &amp; Setup</a>
<ul>
<li class="toc-entry toc-h2"><a href="#distribution-options">Distribution options</a></li>
<li class="toc-entry toc-h2"><a href="#live-demo">Live Demo</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#quick-start">Quick Start</a>
<ul>
<li class="toc-entry toc-h2"><a href="#using-the-core-api">Using the Core API</a></li>
<li class="toc-entry toc-h2"><a href="#using-the-rest-service">Using the REST service</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#core-concepts">Core Concepts</a>
<ul>
<li class="toc-entry toc-h2"><a href="#classes-and-hierarchy">Classes and Hierarchy</a></li>
<li class="toc-entry toc-h2"><a href="#composition">Composition</a></li>
<li class="toc-entry toc-h2"><a href="#named-groups-as-fields">Named Groups as Fields</a></li>
<li class="toc-entry toc-h2"><a href="#non-capturing-classes">Non-Capturing Classes</a></li>
<li class="toc-entry toc-h2"><a href="#explicit-capturing">Explicit Capturing</a></li>
<li class="toc-entry toc-h2"><a href="#flags-inline">Flags (Inline)</a></li>
<li class="toc-entry toc-h2"><a href="#result-tree">Result Tree</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#yaml-dsl">YAML DSL</a>
<ul>
<li class="toc-entry toc-h2"><a href="#structure">Structure</a></li>
<li class="toc-entry toc-h2"><a href="#imports">Imports</a></li>
<li class="toc-entry toc-h2"><a href="#flags-file-level">Flags (File-level)</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#applying-patterns--results">Applying Patterns &amp; Results</a>
<ul>
<li class="toc-entry toc-h2"><a href="#in-java-matcher--group">In Java (Matcher / Group)</a></li>
<li class="toc-entry toc-h2"><a href="#via-rest-json-results">Via REST (JSON results)</a></li>
<li class="toc-entry toc-h2"><a href="#choosing-the-format">Choosing the format</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#advanced-usage">Advanced Usage</a>
<ul>
<li class="toc-entry toc-h2"><a href="#building-libraries-of-patterns">Building libraries of patterns</a></li>
<li class="toc-entry toc-h2"><a href="#multi-level-hierarchy-in-practice">Multi-level hierarchy in practice</a></li>
<li class="toc-entry toc-h2"><a href="#combining-named-groups-with-references">Combining named groups with references</a></li>
<li class="toc-entry toc-h2"><a href="#handling-variations-in-input-formats">Handling variations in input formats</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#examples">Examples</a>
<ul>
<li class="toc-entry toc-h2"><a href="#log-parsing">Log Parsing</a></li>
<li class="toc-entry toc-h2"><a href="#financial-transactions">Financial Transactions</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#summary">Summary</a></li>
</ul>
    </div>
</aside>

<details class="toc-mobile">
    <summary>Table of Contents</summary>
    <aside class="toc" aria-label="Table of contents">
        <div class="toc-inner">
            <ul id="toc" class="section-nav">
<li class="toc-entry toc-h1"><a href="#introduction">Introduction</a>
<ul>
<li class="toc-entry toc-h2"><a href="#what-expresso-is">What Expresso is</a></li>
<li class="toc-entry toc-h2"><a href="#what-expresso-is-not">What Expresso is not</a></li>
<li class="toc-entry toc-h2"><a href="#why-it-matters">Why it matters</a></li>
<li class="toc-entry toc-h2"><a href="#positioning">Positioning</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#installation--setup">Installation &amp; Setup</a>
<ul>
<li class="toc-entry toc-h2"><a href="#distribution-options">Distribution options</a></li>
<li class="toc-entry toc-h2"><a href="#live-demo">Live Demo</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#quick-start">Quick Start</a>
<ul>
<li class="toc-entry toc-h2"><a href="#using-the-core-api">Using the Core API</a></li>
<li class="toc-entry toc-h2"><a href="#using-the-rest-service">Using the REST service</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#core-concepts">Core Concepts</a>
<ul>
<li class="toc-entry toc-h2"><a href="#classes-and-hierarchy">Classes and Hierarchy</a></li>
<li class="toc-entry toc-h2"><a href="#composition">Composition</a></li>
<li class="toc-entry toc-h2"><a href="#named-groups-as-fields">Named Groups as Fields</a></li>
<li class="toc-entry toc-h2"><a href="#non-capturing-classes">Non-Capturing Classes</a></li>
<li class="toc-entry toc-h2"><a href="#explicit-capturing">Explicit Capturing</a></li>
<li class="toc-entry toc-h2"><a href="#flags-inline">Flags (Inline)</a></li>
<li class="toc-entry toc-h2"><a href="#result-tree">Result Tree</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#yaml-dsl">YAML DSL</a>
<ul>
<li class="toc-entry toc-h2"><a href="#structure">Structure</a></li>
<li class="toc-entry toc-h2"><a href="#imports">Imports</a></li>
<li class="toc-entry toc-h2"><a href="#flags-file-level">Flags (File-level)</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#applying-patterns--results">Applying Patterns &amp; Results</a>
<ul>
<li class="toc-entry toc-h2"><a href="#in-java-matcher--group">In Java (Matcher / Group)</a></li>
<li class="toc-entry toc-h2"><a href="#via-rest-json-results">Via REST (JSON results)</a></li>
<li class="toc-entry toc-h2"><a href="#choosing-the-format">Choosing the format</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#advanced-usage">Advanced Usage</a>
<ul>
<li class="toc-entry toc-h2"><a href="#building-libraries-of-patterns">Building libraries of patterns</a></li>
<li class="toc-entry toc-h2"><a href="#multi-level-hierarchy-in-practice">Multi-level hierarchy in practice</a></li>
<li class="toc-entry toc-h2"><a href="#combining-named-groups-with-references">Combining named groups with references</a></li>
<li class="toc-entry toc-h2"><a href="#handling-variations-in-input-formats">Handling variations in input formats</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#examples">Examples</a>
<ul>
<li class="toc-entry toc-h2"><a href="#log-parsing">Log Parsing</a></li>
<li class="toc-entry toc-h2"><a href="#financial-transactions">Financial Transactions</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#summary">Summary</a></li>
</ul>
        </div>
    </aside>
</details>
    <article class="content">
<!--        <h1>EXPRESSO</h1>-->
        <h1 id="introduction">Introduction</h1>

<blockquote>
  <p>Extended regular expressions with <strong>object-oriented</strong> patterns and hierarchical results.</p>
</blockquote>

<p><strong>Expresso</strong> is a Java library that extends the familiar power of regular expressions with an <strong>object-oriented layer</strong>. It introduces the ability to define <strong>named classes</strong>, <strong>nested structures</strong>, and <strong>reusable components</strong>, while staying fully compatible with the mental model of traditional regex.</p>

<p>At its core, Expresso provides two things:</p>

<ul>
  <li>A <strong>Core API</strong> that lets you compile and run extended regex patterns in the same spirit as <code class="language-plaintext highlighter-rouge">Pattern</code> and <code class="language-plaintext highlighter-rouge">Matcher</code>.</li>
  <li>A <strong>YAML-based DSL</strong> that allows you to declare patterns in a modular and maintainable way, with features such as <code class="language-plaintext highlighter-rouge">imports</code> and self-contained test cases.</li>
</ul>

<h2 id="what-expresso-is">What Expresso is</h2>

<ul>
  <li>An <strong>extension of regex</strong>, not a replacement.</li>
  <li>A tool that can be used at different levels: from simple string matching to building complete parsers or even compiler front-ends.</li>
  <li>A way to keep complex patterns <strong>organized, reusable, and understandable</strong> by introducing OOP-style constructs.</li>
</ul>

<h2 id="what-expresso-is-not">What Expresso is not</h2>

<ul>
  <li>It is <strong>not</strong> a fixed grammar or a pre-built parser for specific domains.</li>
  <li>The YAML templates and demo examples (logs, finance, math, HTML, SQL, code) are <strong>illustrations only</strong>. They show what you <em>can</em> build, but they are not shipped as a ruleset.</li>
</ul>

<h2 id="why-it-matters">Why it matters</h2>

<p>Regular expressions are universal, but they flatten everything into numbered groups. When problems grow in complexity, patterns become unreadable and unmaintainable. Expresso addresses this by:</p>

<ul>
  <li>Naming and structuring groups as <strong>classes and subclasses</strong>.</li>
  <li>Supporting <strong>hierarchical nesting</strong> that mirrors the logical structure of the input.</li>
  <li>Allowing <strong>reuse</strong> of patterns through imports and modular design.</li>
</ul>

<h2 id="positioning">Positioning</h2>

<p>You can think of Expresso as <strong>regex with an OOP dimension</strong>:</p>

<ul>
  <li>Use it like plain regex when all you need is quick matching.</li>
  <li>Or scale up and use it as the foundation for parsers, analyzers, or compilers, where structured output is required.</li>
</ul>

<h1 id="installation--setup">Installation &amp; Setup</h1>

<p>Expresso is a <strong>tool</strong> that can be packaged and delivered in different ways depending on integration needs. There is no single standard distribution at the moment.</p>

<h2 id="distribution-options">Distribution options</h2>

<ul>
  <li><strong>Java library</strong> – integrate directly into Java projects by adding the JAR to your classpath or using private Maven/Gradle coordinates (when provided).</li>
  <li><strong>Docker image with REST API</strong> – run Expresso as a service and access it from any language or platform over HTTP.</li>
  <li><strong>Other formats</strong> – alternative packaging (standalone server, embedded component) can be arranged depending on project requirements.</li>
</ul>

<blockquote>
  <p>In short: Expresso provides the core functionality, and the delivery format is flexible.</p>
</blockquote>

<h2 id="live-demo">Live Demo</h2>

<p>A fully functional <strong>Live Demo</strong> is available online: <a href="https://expresso.cariochi.com">expresso.cariochi.com</a></p>

<p>The demo allows you to explore Expresso immediately, try out example patterns, and view structured results without any installation.</p>

<h1 id="quick-start">Quick Start</h1>

<p>Expresso can run inside Java applications or be accessed remotely through a REST service. In Java, the API provides dedicated classes (<code class="language-plaintext highlighter-rouge">Matcher</code>, <code class="language-plaintext highlighter-rouge">Group</code>) that work much like the standard regex API but return structured objects instead of plain strings.</p>

<h2 id="using-the-core-api">Using the Core API</h2>

<p>The API design resembles Java’s <code class="language-plaintext highlighter-rouge">Pattern</code>/<code class="language-plaintext highlighter-rouge">Matcher</code>, while extending it with structured results:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Define patterns as a YAML string</span>
<span class="nc">String</span> <span class="n">patterns</span> <span class="o">=</span> <span class="sh">"""
        Number:
          Integer: [ '\\d+' ]
          Decimal: [ '${?Integer}\\.${?Integer}' ]
        Currency:
          USD: [ '\\$' ]
          EUR: [ '€' ]
          GBP: [ '£' ]
        Price: [ '${Currency}${Number}' ]
        Percent: [ '${Number}%' ]
        """</span><span class="o">;</span>

<span class="c1">// Compile pattern definitions (compile once, reuse for multiple inputs)</span>
<span class="nc">Matcher</span> <span class="n">matcher</span> <span class="o">=</span> <span class="nc">Expresso</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="n">patterns</span><span class="o">).</span><span class="na">matcher</span><span class="o">(</span><span class="n">text</span><span class="o">);</span>

<span class="c1">// Collect hierarchical matches</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Group</span><span class="o">&gt;</span> <span class="n">matches</span> <span class="o">=</span> <span class="n">matcher</span><span class="o">.</span><span class="na">results</span><span class="o">().</span><span class="na">toList</span><span class="o">();</span>

<span class="c1">// Navigate the tree of groups</span>
<span class="nc">Group</span> <span class="n">first</span> <span class="o">=</span> <span class="n">matches</span><span class="o">.</span><span class="na">getFirst</span><span class="o">();</span>
<span class="n">first</span><span class="o">.</span><span class="na">getChildren</span><span class="o">();</span>   <span class="c1">// access nested groups</span>
<span class="n">first</span><span class="o">.</span><span class="na">collect</span><span class="o">();</span>       <span class="c1">// flatten subtree into a list</span>

<span class="c1">// Perform replacements using a function of the matched group</span>
<span class="nc">String</span> <span class="n">out</span> <span class="o">=</span> <span class="n">matcher</span><span class="o">.</span><span class="na">replaceAll</span><span class="o">(</span><span class="n">g</span> <span class="o">-&gt;</span> <span class="s">"&lt;"</span> <span class="o">+</span> <span class="n">g</span><span class="o">.</span><span class="na">getValue</span><span class="o">()</span> <span class="o">+</span> <span class="s">"&gt;"</span><span class="o">);</span>
</code></pre></div></div>

<p>Key points:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">results()</code> provides a stream of <code class="language-plaintext highlighter-rouge">Group</code> objects, each representing a full match with nested structure.</li>
  <li><code class="language-plaintext highlighter-rouge">replaceAll(Function&lt;Group,String&gt;)</code> enables programmatic text transformation.</li>
  <li><code class="language-plaintext highlighter-rouge">Matcher</code> also exposes index‑based methods (<code class="language-plaintext highlighter-rouge">start(int)</code>, <code class="language-plaintext highlighter-rouge">end(int)</code>, <code class="language-plaintext highlighter-rouge">group(int)</code>, <code class="language-plaintext highlighter-rouge">groupName(int)</code>) for low‑level access.</li>
</ul>

<h2 id="using-the-rest-service">Using the REST service</h2>

<p>When running as a service (for example via Docker):</p>

<ul>
  <li>Patterns are first registered through the API or UI. They can import other patterns, allowing for a shared core library.</li>
  <li>
    <p>After registration, a client sends input text together with the chosen pattern name/ID and the preferred output format:</p>

    <ul>
      <li><strong>model</strong> – hierarchical result with named classes and groups.</li>
      <li><strong>raw</strong> – flat matches with positions and values.</li>
    </ul>
  </li>
  <li>The service applies the stored pattern configuration and returns the structured JSON result.</li>
</ul>

<h1 id="core-concepts">Core Concepts</h1>

<p>Expresso brings an <strong>object‑oriented layer</strong> to regular expressions. Instead of flat, numbered groups, you define <strong>classes</strong> with a hierarchical structure and compose them into larger patterns. The result is a tree of matches that reflects this hierarchy.</p>

<h2 id="classes-and-hierarchy">Classes and Hierarchy</h2>

<ul>
  <li>A <strong>class</strong> is a named unit that describes a piece of text, such as <code class="language-plaintext highlighter-rouge">Number</code>, <code class="language-plaintext highlighter-rouge">Date</code>, or <code class="language-plaintext highlighter-rouge">Currency</code>.</li>
  <li>Classes can be organized into a <strong>multi‑level hierarchy</strong>. The hierarchy is expressed using dot notation (<code class="language-plaintext highlighter-rouge">Number.Integer</code>, <code class="language-plaintext highlighter-rouge">Number.Decimal</code>) or via indentation in YAML.</li>
  <li>A class may define <strong>multiple regex patterns</strong>. This allows one logical type to match several textual forms.</li>
</ul>

<p>Example:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Integer</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="se">\\</span><span class="s">d+"</span> <span class="pi">]</span>
<span class="na">Decimal</span><span class="pi">:</span>
  <span class="na">Common</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="se">\\</span><span class="s">d+</span><span class="se">\\</span><span class="s">.</span><span class="se">\\</span><span class="s">d+"</span> <span class="pi">]</span>
  <span class="na">Scientific</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="se">\\</span><span class="s">d+</span><span class="se">\\</span><span class="s">.</span><span class="se">\\</span><span class="s">d+e[+-]?</span><span class="se">\\</span><span class="s">d+"</span> <span class="pi">]</span>
</code></pre></div></div>

<p>This defines <code class="language-plaintext highlighter-rouge">Number.Integer</code>, <code class="language-plaintext highlighter-rouge">Number.Decimal</code>, <code class="language-plaintext highlighter-rouge">Number.Decimal.Common</code> and <code class="language-plaintext highlighter-rouge">Number.Decimal.Scientific</code> as part of the same hierarchy.</p>

<h2 id="composition">Composition</h2>

<ul>
  <li>Classes can reference other classes to build larger constructs.</li>
  <li>References can point to any level of the hierarchy. You can use <code class="language-plaintext highlighter-rouge">${Class}</code>, <code class="language-plaintext highlighter-rouge">${Class.Subclass}</code>, or even deeper paths like <code class="language-plaintext highlighter-rouge">${Class.Subclass.Child}</code>.</li>
</ul>

<p>Example:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Currency</span><span class="pi">:</span>
  <span class="na">USD</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="se">\\</span><span class="s">$"</span> <span class="pi">]</span>
  <span class="na">EUR</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">€"</span> <span class="pi">]</span>

<span class="na">Number</span><span class="pi">:</span>
  <span class="na">Integer</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="se">\\</span><span class="s">d+"</span> <span class="pi">]</span>
  <span class="na">Decimal</span><span class="pi">:</span>
    <span class="na">Scientific</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="se">\\</span><span class="s">d+</span><span class="se">\\</span><span class="s">.</span><span class="se">\\</span><span class="s">d+e[+-]?</span><span class="se">\\</span><span class="s">d+"</span> <span class="pi">]</span>

<span class="na">Price</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">${Currency}${Number}"</span> <span class="pi">]</span>                               <span class="c1"># use whole classes</span>
<span class="na">PriceUSD</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">${Currency.USD}${Number}"</span> <span class="pi">]</span>                        <span class="c1"># reference a specific subclass</span>
<span class="na">ScientificPrice</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">${Currency}${Number.Decimal.Scientific}"</span> <span class="pi">]</span>  <span class="c1"># reference a deep child</span>
</code></pre></div></div>

<p>Here, <code class="language-plaintext highlighter-rouge">Price</code> composes from entire classes, <code class="language-plaintext highlighter-rouge">PriceUSD</code> targets a specific subclass, and <code class="language-plaintext highlighter-rouge">ScientificPrice</code> references a deeper level in the hierarchy.</p>

<h2 id="named-groups-as-fields">Named Groups as Fields</h2>

<ul>
  <li>Within a class’s regex, you may define <strong>named groups</strong> to expose sub-components of the match.</li>
  <li>Named groups can also be combined with <strong>references</strong> to other classes, so you can wrap reused patterns with additional structure.</li>
</ul>

<p>Examples:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Date</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">(?&lt;year&gt;</span><span class="se">\\</span><span class="s">d{4})-(?&lt;month&gt;</span><span class="se">\\</span><span class="s">d{2})-(?&lt;day&gt;</span><span class="se">\\</span><span class="s">d{2})"</span> <span class="pi">]</span>

<span class="na">Currency</span><span class="pi">:</span>
  <span class="na">USD</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="se">\\</span><span class="s">$"</span> <span class="pi">]</span>
  <span class="na">EUR</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">€"</span> <span class="pi">]</span>

<span class="na">Number</span><span class="pi">:</span>
  <span class="na">Integer</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="se">\\</span><span class="s">d+"</span> <span class="pi">]</span>

<span class="na">Transaction</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">(?&lt;amount&gt;${Number.Integer})(?&lt;currency&gt;${Currency})"</span> <span class="pi">]</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Date</code> uses local named groups (<code class="language-plaintext highlighter-rouge">year</code>, <code class="language-plaintext highlighter-rouge">month</code>, <code class="language-plaintext highlighter-rouge">day</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">Transaction</code> combines named groups (<code class="language-plaintext highlighter-rouge">amount</code>, <code class="language-plaintext highlighter-rouge">currency</code>) with references to other classes, producing a structured result like:</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Transaction
 ├─ amount → Number.Integer
 └─ currency → Currency (USD/EUR)
</code></pre></div></div>

<h2 id="non-capturing-classes">Non-Capturing Classes</h2>

<p>A non-capturing class is used only for grouping and matching, but it does not produce its own node in the result tree. They are useful when you need regex structure without polluting the output.</p>

<ul>
  <li>Mark a class as <strong>non-capturing</strong> using the <code class="language-plaintext highlighter-rouge">?</code> prefix:</li>
</ul>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s1">'</span><span class="s">?Action'</span><span class="err">:</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">grew</span><span class="nv"> </span><span class="s">by'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">is</span><span class="nv"> </span><span class="s">growing</span><span class="nv"> </span><span class="s">by'</span> <span class="pi">]</span>
</code></pre></div></div>

<ul>
  <li>Treat a class as non-capturing <strong>within a specific pattern</strong> using <code class="language-plaintext highlighter-rouge">${?Class}</code>:</li>
</ul>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Number</span><span class="pi">:</span>
  <span class="na">Integer</span><span class="pi">:</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">\d+'</span> <span class="pi">]</span>
  <span class="na">Decimal</span><span class="pi">:</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">${?Integer}\.${?Integer}'</span> <span class="pi">]</span>
</code></pre></div></div>

<p>Here <code class="language-plaintext highlighter-rouge">Integer</code> is captured normally elsewhere, but inside <code class="language-plaintext highlighter-rouge">Decimal</code> it participates without creating separate nodes.</p>

<h2 id="explicit-capturing">Explicit Capturing</h2>

<ul>
  <li>If a class is under a non-capturing parent, you can mark a child as <strong>explicitly capturing</strong> with the <code class="language-plaintext highlighter-rouge">!</code> prefix (compact notation):</li>
</ul>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s1">'</span><span class="s">?NonCapturing'</span><span class="err">:</span>
  <span class="s1">'</span><span class="s">!Capturing'</span><span class="err">:</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">specific</span><span class="nv"> </span><span class="s">patterns'</span> <span class="pi">]</span>
</code></pre></div></div>

<ul>
  <li>At the <strong>group level</strong>, force capture of a non-capturing class inside a pattern using <code class="language-plaintext highlighter-rouge">${!Class}</code>:</li>
</ul>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s1">'</span><span class="s">?Action'</span><span class="err">:</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">grew</span><span class="nv"> </span><span class="s">by'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">is</span><span class="nv"> </span><span class="s">growing</span><span class="nv"> </span><span class="s">by'</span> <span class="pi">]</span>
<span class="na">FinData</span><span class="pi">:</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">${FinIndicator}</span><span class="nv"> </span><span class="s">${!Action}</span><span class="nv"> </span><span class="s">${Percent}'</span> <span class="pi">]</span>
</code></pre></div></div>

<p>This way <code class="language-plaintext highlighter-rouge">Action</code> remains non-capturing by default, but is included in results within <code class="language-plaintext highlighter-rouge">FinData</code>.</p>

<h2 id="flags-inline">Flags (Inline)</h2>

<p>Flags modify how individual regex patterns behave. They can be applied inline inside a regex literal, following the same syntax as Java’s <code class="language-plaintext highlighter-rouge">Pattern</code>.</p>

<p>Supported flags:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">i</code> — case-insensitive</li>
  <li><code class="language-plaintext highlighter-rouge">m</code> — multiline mode (<code class="language-plaintext highlighter-rouge">^</code> and <code class="language-plaintext highlighter-rouge">$</code> match line boundaries)</li>
  <li><code class="language-plaintext highlighter-rouge">s</code> — dotall mode (<code class="language-plaintext highlighter-rouge">.</code> matches line terminators)</li>
  <li><code class="language-plaintext highlighter-rouge">u</code> — unicode case</li>
  <li><code class="language-plaintext highlighter-rouge">x</code> — extended mode (ignore whitespace and allow comments in regex)</li>
  <li><code class="language-plaintext highlighter-rouge">d</code> — UNIX lines mode</li>
</ul>

<p>Examples:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Line</span><span class="pi">:</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">(?m)^(.*)$'</span> <span class="pi">]</span>               <span class="c1"># (?m) enables multiline mode</span>

<span class="na">Pet</span><span class="pi">:</span>
  <span class="na">Dog</span><span class="pi">:</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">(?i)do(ggies|ggy|gs|g)'</span> <span class="pi">]</span>  <span class="c1"># (?i) makes the match case‑insensitive</span>
  <span class="na">Cat</span><span class="pi">:</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">(?i)cats?'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">(?i)kitt(ies|y)'</span> <span class="pi">]</span>
</code></pre></div></div>

<h2 id="result-tree">Result Tree</h2>

<ul>
  <li>Every match reflects the class hierarchy and named groups, producing a <strong>tree structure</strong>.</li>
  <li>In Java, this tree is navigated with <code class="language-plaintext highlighter-rouge">Group</code> (children, values, positions).</li>
  <li>In REST responses, the same structure is serialized as JSON, with <code class="language-plaintext highlighter-rouge">model</code> representing the hierarchical view and <code class="language-plaintext highlighter-rouge">raw</code> showing the low‑level spans.</li>
</ul>

<blockquote>
  <p>In essence, Expresso turns regex into an <strong>OOP‑like system</strong>: classes define types, dot notation defines hierarchy, composition combines them, and named groups act as fields.</p>
</blockquote>

<h1 id="yaml-dsl">YAML DSL</h1>

<p>Expresso provides a <strong>domain-specific language (DSL)</strong> for defining pattern libraries in YAML. This format makes complex pattern sets modular, reusable, and easier to maintain.</p>

<blockquote>
  <p>For an explanation of the underlying ideas (classes, hierarchy, composition, named groups), see <strong>Core Concepts</strong>. This section focuses on the YAML syntax itself.</p>
</blockquote>

<h2 id="structure">Structure</h2>

<p>A pattern file has two top-level keys:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">imports</code> – optional, used to include other YAML pattern files.</li>
  <li><code class="language-plaintext highlighter-rouge">flags</code> – optional, sets file-level flags that apply to all patterns.</li>
  <li><code class="language-plaintext highlighter-rouge">classes</code> – required, defines the class hierarchy and their regex patterns.</li>
</ul>

<p>Example:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">imports</span><span class="pi">:</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">numbers'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">money'</span> <span class="pi">]</span>

<span class="na">flags</span><span class="pi">:</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">case_insensitive'</span> <span class="pi">]</span>

<span class="na">classes</span><span class="pi">:</span>
  
  <span class="na">Date</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">(?&lt;year&gt;</span><span class="se">\\</span><span class="s">d{4})-(?&lt;month&gt;</span><span class="se">\\</span><span class="s">d{2})-(?&lt;day&gt;</span><span class="se">\\</span><span class="s">d{2})"</span> <span class="pi">]</span>

  <span class="na">Currency</span><span class="pi">:</span>
    <span class="na">USD</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="se">\\</span><span class="s">$"</span> <span class="pi">]</span>
    <span class="na">EUR</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">€"</span> <span class="pi">]</span>

  <span class="na">Number</span><span class="pi">:</span>
    <span class="na">Integer</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="se">\\</span><span class="s">d+"</span> <span class="pi">]</span>
    <span class="na">Decimal</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="se">\\</span><span class="s">d+</span><span class="se">\\</span><span class="s">.</span><span class="se">\\</span><span class="s">d+"</span> <span class="pi">]</span>

  <span class="na">Price</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">${Currency}${Number}"</span> <span class="pi">]</span>
</code></pre></div></div>

<h2 id="imports">Imports</h2>

<p>The <code class="language-plaintext highlighter-rouge">imports</code> section allows one YAML file to reuse definitions from others, so that common building blocks can be centralized and shared.</p>

<p>There are several ways to specify imports:</p>

<ul>
  <li>
    <p>By logical name (without extension):</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">imports</span><span class="pi">:</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">numbers'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">money'</span> <span class="pi">]</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>By file name (with extension):</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">imports</span><span class="pi">:</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">numbers.yml'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">money.yml'</span> <span class="pi">]</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>By relative path (for organized libraries):</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">imports</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s1">'</span><span class="s">core/datetime.yml'</span>
  <span class="pi">-</span> <span class="s1">'</span><span class="s">core/finance.yml'</span>
</code></pre></div>    </div>
  </li>
</ul>

<p>This flexibility allows you to structure pattern libraries according to your project’s needs, whether as simple names, explicit file references, or organized folder hierarchies. Imports are also resolved recursively: if an imported file itself declares <code class="language-plaintext highlighter-rouge">imports</code>, those will be loaded as well, so that the entire dependency chain is brought in automatically.</p>
<blockquote>
  <p>The YAML DSL makes Expresso patterns portable and maintainable, while directly mapping onto the object model of the core API.</p>
</blockquote>

<h2 id="flags-file-level">Flags (File-level)</h2>

<p>In the YAML DSL you can declare <strong>file-level flags</strong> that apply to all patterns in the file. This is useful when you want a consistent matching mode across many classes.</p>

<p>Supported values for <code class="language-plaintext highlighter-rouge">flags</code> (file-level keywords):</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">case_insensitive</code> — case-insensitive</li>
  <li><code class="language-plaintext highlighter-rouge">multiline</code> — multiline mode (<code class="language-plaintext highlighter-rouge">^</code> and <code class="language-plaintext highlighter-rouge">$</code> match line boundaries)</li>
  <li><code class="language-plaintext highlighter-rouge">dotall</code> — dotall mode (<code class="language-plaintext highlighter-rouge">.</code> matches line terminators)</li>
  <li><code class="language-plaintext highlighter-rouge">unicode_case</code> — unicode case</li>
  <li><code class="language-plaintext highlighter-rouge">comments</code> — extended mode (ignore whitespace and allow comments in regex)</li>
  <li><code class="language-plaintext highlighter-rouge">unix_lines</code> — UNIX lines mode</li>
</ul>

<h1 id="applying-patterns--results">Applying Patterns &amp; Results</h1>

<p>Once patterns are defined (either as YAML or inline strings), Expresso can apply them to input text and produce structured results. The output always reflects the class hierarchy and any named groups.</p>

<h2 id="in-java-matcher--group">In Java (Matcher / Group)</h2>

<p>Using the Core API, results are provided as <code class="language-plaintext highlighter-rouge">Group</code> objects organized into a tree.</p>

<p>Example:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Matcher</span> <span class="n">matcher</span> <span class="o">=</span> <span class="nc">Expresso</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="n">patterns</span><span class="o">).</span><span class="na">matcher</span><span class="o">(</span><span class="s">"Price: $123"</span><span class="o">);</span>

<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Group</span><span class="o">&gt;</span> <span class="n">matches</span> <span class="o">=</span> <span class="n">matcher</span><span class="o">.</span><span class="na">results</span><span class="o">().</span><span class="na">toList</span><span class="o">();</span>
<span class="nc">Group</span> <span class="n">first</span> <span class="o">=</span> <span class="n">matches</span><span class="o">.</span><span class="na">getFirst</span><span class="o">();</span>

<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">first</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>     <span class="c1">// e.g. "Price"</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">first</span><span class="o">.</span><span class="na">getChildren</span><span class="o">());</span> <span class="c1">// nested groups: Currency, Number</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Matcher</code> exposes methods similar to <code class="language-plaintext highlighter-rouge">Matcher</code> (<code class="language-plaintext highlighter-rouge">start</code>, <code class="language-plaintext highlighter-rouge">end</code>, <code class="language-plaintext highlighter-rouge">group</code>), but works with hierarchical groups.</li>
  <li><code class="language-plaintext highlighter-rouge">Group</code> represents a single match node with children, value, and position.</li>
</ul>

<h2 id="via-rest-json-results">Via REST (JSON results)</h2>

<p>When Expresso runs as a service, results can be returned in two formats:</p>

<ul>
  <li><strong>model</strong> – a hierarchical JSON object where each node corresponds to a class/group in the pattern.</li>
  <li><strong>raw</strong> – a flat list of matches with their positions and values.</li>
</ul>

<p>Example (<code class="language-plaintext highlighter-rouge">model</code>):</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"Price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Currency.USD"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Number.Integer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Example (<code class="language-plaintext highlighter-rouge">raw</code>):</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Money"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
    </span><span class="nl">"end"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
    </span><span class="nl">"groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Currency.USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
        </span><span class="nl">"end"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Number.Integer"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="nl">"end"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<h2 id="choosing-the-format">Choosing the format</h2>

<ul>
  <li>Use <strong>model</strong> when you want structured trees that mirror the class hierarchy.</li>
  <li>Use <strong>raw</strong> when you need exact spans, positions, or prefer a flattened view of the matches.</li>
</ul>

<blockquote>
  <p>The JSON examples shown above are illustrative. The actual output format can be customized to fit your integration needs.</p>
</blockquote>

<h1 id="advanced-usage">Advanced Usage</h1>

<p>Beyond the basics, Expresso enables more advanced ways to organize and apply patterns. These features highlight its flexibility for real-world scenarios.</p>

<h2 id="building-libraries-of-patterns">Building libraries of patterns</h2>

<ul>
  <li>You can maintain common definitions (e.g., numbers, dates, currencies) in separate YAML files.</li>
  <li>Other pattern files can <code class="language-plaintext highlighter-rouge">import</code> them and build higher-level constructs.</li>
</ul>

<p>Example:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">imports</span><span class="pi">:</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">numbers'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">dates'</span> <span class="pi">]</span>

<span class="na">classes</span><span class="pi">:</span>
  <span class="na">Event</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">${Date}</span><span class="nv"> </span><span class="s">—</span><span class="nv"> </span><span class="s">${Number}"</span> <span class="pi">]</span>
</code></pre></div></div>

<p>This way, <code class="language-plaintext highlighter-rouge">Event</code> automatically benefits from improvements in the shared <code class="language-plaintext highlighter-rouge">numbers</code> and <code class="language-plaintext highlighter-rouge">dates</code> libraries.</p>

<h2 id="multi-level-hierarchy-in-practice">Multi-level hierarchy in practice</h2>

<ul>
  <li>Classes can be nested multiple levels deep, creating rich type systems.</li>
</ul>

<p>Example:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Number</span><span class="pi">:</span>
  <span class="na">Decimal</span><span class="pi">:</span>
    <span class="na">Scientific</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="se">\\</span><span class="s">d+</span><span class="se">\\</span><span class="s">.</span><span class="se">\\</span><span class="s">d+e[+-]?</span><span class="se">\\</span><span class="s">d+"</span> <span class="pi">]</span>
</code></pre></div></div>

<p>Here <code class="language-plaintext highlighter-rouge">Number.Decimal.Scientific</code> is a precise subtype of <code class="language-plaintext highlighter-rouge">Number.Decimal</code>, which itself is under <code class="language-plaintext highlighter-rouge">Number</code>.</p>

<h2 id="combining-named-groups-with-references">Combining named groups with references</h2>

<ul>
  <li>Named groups can wrap references to add structure or capture labels around reused classes.</li>
</ul>

<p>Example:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Transaction</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">(?&lt;amount&gt;${Number})(?&lt;currency&gt;${Currency})"</span> <span class="pi">]</span>
</code></pre></div></div>

<p>This produces a tree with a <code class="language-plaintext highlighter-rouge">Transaction</code> node containing two child groups, <code class="language-plaintext highlighter-rouge">amount</code> and <code class="language-plaintext highlighter-rouge">currency</code>, which in turn resolve into their respective class matches.</p>

<h2 id="handling-variations-in-input-formats">Handling variations in input formats</h2>

<ul>
  <li>A class can define multiple regex patterns to cover different formats.</li>
</ul>

<p>Example:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Date</span><span class="pi">:</span>
  <span class="na">ISO</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">(?&lt;year&gt;</span><span class="se">\\</span><span class="s">d{4})-(?&lt;month&gt;</span><span class="se">\\</span><span class="s">d{2})-(?&lt;day&gt;</span><span class="se">\\</span><span class="s">d{2})"</span> <span class="pi">]</span>
  <span class="na">US</span><span class="pi">:</span>  <span class="pi">[</span> <span class="s2">"</span><span class="s">(?&lt;month&gt;</span><span class="se">\\</span><span class="s">d{2})/(?&lt;day&gt;</span><span class="se">\\</span><span class="s">d{2})/(?&lt;year&gt;</span><span class="se">\\</span><span class="s">d{4})"</span> <span class="pi">]</span>
</code></pre></div></div>

<p>This allows <code class="language-plaintext highlighter-rouge">Date</code> to match either ISO (<code class="language-plaintext highlighter-rouge">2024-12-31</code>) or US (<code class="language-plaintext highlighter-rouge">12/31/2024</code>) style inputs.</p>

<blockquote>
  <p>These advanced usage patterns show how Expresso can scale from simple string matching to complex, domain-specific grammars while keeping definitions modular and maintainable.</p>
</blockquote>

<h1 id="examples">Examples</h1>

<p>Expresso is not tied to a single domain. The same object‑oriented pattern approach can be applied to many different kinds of text. Below are some illustrative examples.</p>

<h2 id="log-parsing">Log Parsing</h2>

<p>System logs often contain a timestamp, log level, thread, and message. With Expresso, these parts can be defined as classes and then composed.</p>

<p>Input:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2024-05-01 12:34:56 [INFO] [main] Application started
</code></pre></div></div>

<p>Pattern (simplified):</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Timestamp</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="se">\\</span><span class="s">d{4}-</span><span class="se">\\</span><span class="s">d{2}-</span><span class="se">\\</span><span class="s">d{2}</span><span class="nv"> </span><span class="se">\\</span><span class="s">d{2}:</span><span class="se">\\</span><span class="s">d{2}:</span><span class="se">\\</span><span class="s">d{2}"</span> <span class="pi">]</span>
<span class="na">Level</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">INFO"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">WARN"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">ERROR"</span> <span class="pi">]</span>
<span class="na">Thread</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="se">\\</span><span class="s">[.*?</span><span class="se">\\</span><span class="s">]"</span> <span class="pi">]</span>
<span class="na">LogEntry</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">${Timestamp}</span><span class="nv"> </span><span class="s">${Level}</span><span class="nv"> </span><span class="s">${Thread}</span><span class="nv"> </span><span class="s">(?&lt;message&gt;.*)"</span> <span class="pi">]</span>
</code></pre></div></div>

<p>Result (model):</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"LogEntry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-05-01 12:34:56"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INFO"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Thread"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[main]"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Application started"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="financial-transactions">Financial Transactions</h2>

<p>Bank or payment logs can also be broken down into structured elements.</p>

<p>Input:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>TXN-4456 DEBIT 120.50 USD Grocery
</code></pre></div></div>

<p>Pattern (simplified):</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Id</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">TXN-</span><span class="se">\\</span><span class="s">d+"</span> <span class="pi">]</span>
<span class="na">Type</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">DEBIT"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">CREDIT"</span> <span class="pi">]</span>
<span class="na">Currency</span><span class="pi">:</span>
  <span class="na">USD</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">USD"</span> <span class="pi">]</span>
  <span class="na">EUR</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">EUR"</span> <span class="pi">]</span>
<span class="na">Number</span><span class="pi">:</span>
  <span class="na">Decimal</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="se">\\</span><span class="s">d+</span><span class="se">\\</span><span class="s">.</span><span class="se">\\</span><span class="s">d+"</span> <span class="pi">]</span>
<span class="na">Transaction</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">${Id}</span><span class="nv"> </span><span class="s">${Type}</span><span class="nv"> </span><span class="s">${Number}</span><span class="nv"> </span><span class="s">${Currency}</span><span class="nv"> </span><span class="s">(?&lt;category&gt;.*)"</span> <span class="pi">]</span>
</code></pre></div></div>

<p>Result (model):</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"Transaction"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TXN-4456"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEBIT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Number.Decimal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"120.50"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Currency.USD"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Grocery"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<blockquote>
  <p>For more complex, fully worked out examples, see the Live Demo: <a href="https://expresso.cariochi.com">expresso.cariochi.com</a></p>
</blockquote>

<h1 id="summary">Summary</h1>

<p>Expresso extends regular expressions with an <strong>object-oriented model</strong>: classes, hierarchy, composition, and named groups. Instead of flat group captures, it produces structured trees that map naturally onto domain concepts.</p>

<p>Key points:</p>

<ul>
  <li>Use it as a <strong>Java library</strong> (via <code class="language-plaintext highlighter-rouge">Matcher</code>/<code class="language-plaintext highlighter-rouge">Group</code>) or as a <strong>service</strong> (Docker/REST).</li>
  <li>Patterns can be declared directly as strings or maintained in <strong>YAML DSL</strong> files with imports.</li>
  <li>Results can be consumed as Java objects or serialized into JSON (<code class="language-plaintext highlighter-rouge">model</code>, <code class="language-plaintext highlighter-rouge">raw</code>, or a custom format).</li>
  <li>Advanced usage includes creating shared YAML libraries (via imports) and supporting multiple formats within a single class.</li>
  <li>A fully functional <strong>Live Demo</strong> is available at <a href="https://expresso.cariochi.com">expresso.cariochi.com</a>.</li>
</ul>

<p>Expresso, like regex itself, is domain-agnostic. It is not a pre-built grammar, but a <strong>tool</strong>: it provides an object-oriented way to describe patterns in any kind of text. Using classes, hierarchy, composition, and named groups, you can model structures across diverse domains.</p>

    </article>
    <a href="#top" class="back-to-top" title="Back to top">↑</a>
</div>

</main><footer class="site-footer">
    <div class="container footer-inner">
        <p class="copyright">© 2025 CARIOCHI.
            Powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://pages.github.com/">GitHub Pages</a>
        </p>
        <p class="contact">Contact: <a href="mailto:vadym@deineka.com">vadym@deineka.com</a></p>
    </div>
</footer>
<script src="/assets/js/toc.js"></script>
<script src="/assets/js/copy-buttons.js"></script>
</body>
</html>
