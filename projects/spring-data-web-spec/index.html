<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Spring Data Web Spec Â· CARIOCHI</title>
    <link rel="icon" type="image/png" href="/assets/images/favicon.png">
    <link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Spring Data Web Spec | CARIOCHI</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Spring Data Web Spec" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Documentation hub for Reflecto, Objecto, Recordo, Expresso" />
<meta property="og:description" content="Documentation hub for Reflecto, Objecto, Recordo, Expresso" />
<link rel="canonical" href="https://cariochi.github.io/projects/spring-data-web-spec/" />
<meta property="og:url" content="https://cariochi.github.io/projects/spring-data-web-spec/" />
<meta property="og:site_name" content="CARIOCHI" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Spring Data Web Spec" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Documentation hub for Reflecto, Objecto, Recordo, Expresso","headline":"Spring Data Web Spec","url":"https://cariochi.github.io/projects/spring-data-web-spec/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/rouge.css">
    <link rel="stylesheet" href="/assets/css/site.css"/>
</head>
<body><header class="site-header">
    <div class="container">
        <a class="brand" href="/">
            <img src="/assets/images/logo.svg" alt="CARIOCHI"/>
<!--            <span>CARIOCHI</span>-->
        </a>

        <input type="checkbox" id="nav-toggle" class="nav-toggle" aria-label="Toggle navigation">

        <label for="nav-toggle" class="menu-toggle">
            <svg class="burger" viewBox="0 0 24 24" width="20" height="20" aria-hidden="true">
                <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" fill="none"/>
            </svg>
            <span class="menu-text">Menu</span>
        </label>

        <nav class="top-nav" aria-label="Projects">
            <ul><li>
                <a href="/projects/reflecto">REFLECTO</a>
                </li><li>
                <a href="/projects/objecto">OBJECTO</a>
                </li><li>
                <a href="/projects/recordo">RECORDO</a>
                </li><li class="active">
                <a href="/projects/spring-data-web-spec">WEB SPEC</a>
                </li><li>
                <a href="/projects/expresso">EXPRESSO</a>
                </li></ul>
        </nav><a class="header-github" href="https://github.com/cariochi/spring-data-web-spec" target="_blank" rel="noopener"><svg viewBox="0 0 16 16" width="20" height="20" aria-hidden="true" fill="currentColor">
                <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38
                   0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13
                   -.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66
                   .07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15
                   -.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.59-.16 1.23-.24 1.87-.24
                   .64 0 1.28.08 1.87.24 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12
                   .51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48
                   0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
            </svg><span class="github-text">WEB SPEC</span>
        </a></div>
</header>
<main class="container">
    <div class="grid">
    <aside class="toc" aria-label="Table of contents">
    <div class="toc-inner">
        <h3>Spring Data Web Spec</h3>
        <ul id="toc" class="section-nav">
<li class="toc-entry toc-h1"><a href="#overview">Overview</a></li>
<li class="toc-entry toc-h1"><a href="#installation">Installation</a></li>
<li class="toc-entry toc-h1"><a href="#quick-start">Quick start</a>
<ul>
<li class="toc-entry toc-h2"><a href="#configuration">Configuration</a></li>
<li class="toc-entry toc-h2"><a href="#example-usage">Example Usage</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#how-it-works">How it works</a></li>
<li class="toc-entry toc-h1"><a href="#built-in-operators">Built-in operators</a></li>
<li class="toc-entry toc-h1"><a href="#access-control--security">Access control / security</a></li>
<li class="toc-entry toc-h1"><a href="#license">License</a></li>
</ul>
    </div>
</aside>
    <article class="content">
<!--        <h1>Spring Data Web Spec</h1>-->
        <h1 id="overview">Overview</h1>

<p><strong>Spring Data Web Spec</strong> is an <strong>open-source library</strong> for annotation-based mapping from web requests (query parameters, headers, path variables, and security
context) to Spring Data JPA Specifications.</p>

<ul>
  <li>Declare filters directly in controller method parameters</li>
  <li>Integrates seamlessly with <strong>Spring MVC</strong> and <strong>Spring Data JPA</strong></li>
  <li>Extensible <strong>operator</strong> model (<code class="language-plaintext highlighter-rouge">Equal</code>, <code class="language-plaintext highlighter-rouge">In</code>, <code class="language-plaintext highlighter-rouge">ContainsIgnoreCase</code>, <code class="language-plaintext highlighter-rouge">IsNull</code>, etc.)</li>
  <li>Built-in <strong>access control</strong> support via <code class="language-plaintext highlighter-rouge">@Spec.AccessControl</code> for security-based filters</li>
  <li>Minimal runtime dependencies</li>
  <li><strong>Spring Boot autoconfiguration</strong> and optional <code class="language-plaintext highlighter-rouge">@EnableWebSpec</code> annotation for easy setup</li>
</ul>

<p>ðŸ‘‰ Source code is available on <a href="https://github.com/cariochi/spring-data-web-spec">GitHub</a>.</p>

<h1 id="installation">Installation</h1>

<p><strong>Maven</strong></p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.cariochi.spec<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-data-web-spec<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.0.2<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<h1 id="quick-start">Quick start</h1>

<h2 id="configuration">Configuration</h2>

<p>You can register the argument resolver in one of two ways:</p>

<h3 id="1-spring-boot-autoconfiguration-recommended">1. Spring Boot autoconfiguration (recommended)</h3>

<p>If you use <strong>Spring Boot 3.x</strong> and have <strong>spring-data-web-spec</strong> on the classpath, the <code class="language-plaintext highlighter-rouge">SpecArgumentResolver</code> will be auto-registered.
Autoconfiguration is enabled by default but can be disabled via:</p>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">cariochi.spec.web.enabled</span><span class="p">=</span><span class="s">false</span>
</code></pre></div></div>

<h3 id="2-manual-registration-via-enablewebspec">2. Manual registration via @EnableWebSpec</h3>

<p>If you donâ€™t want to rely on <strong>autoconfiguration</strong> (or you use plain <strong>Spring MVC without Boot</strong>), annotate your configuration class:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@EnableWebSpec</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebConfig</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="example-usage">Example Usage</h2>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestController</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">class</span> <span class="nc">DummyController</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">DummyService</span> <span class="n">service</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">DummyMapper</span> <span class="n">mapper</span><span class="o">;</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/organizations/{organizationId}/dummy"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">DummyDto</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">(</span>
            <span class="nd">@Spec</span><span class="o">.</span><span class="na">PathVariable</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"organizationId"</span><span class="o">,</span> <span class="n">path</span> <span class="o">=</span> <span class="s">"organization.id"</span><span class="o">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
            <span class="nd">@Spec</span><span class="o">.</span><span class="na">RequestParam</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"id"</span><span class="o">)</span>
            <span class="nd">@Spec</span><span class="o">.</span><span class="na">RequestParam</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"status"</span><span class="o">,</span> <span class="n">operator</span> <span class="o">=</span> <span class="nc">In</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
            <span class="nd">@Spec</span><span class="o">.</span><span class="na">RequestParam</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"name"</span><span class="o">,</span> <span class="n">operator</span> <span class="o">=</span> <span class="nc">ContainsIgnoreCase</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
            <span class="nd">@Spec</span><span class="o">.</span><span class="na">RequestParam</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"propertyValue"</span><span class="o">,</span> <span class="n">path</span> <span class="o">=</span> <span class="s">"properties.value"</span><span class="o">,</span> <span class="n">joinType</span> <span class="o">=</span> <span class="nc">JoinType</span><span class="o">.</span><span class="na">INNER</span><span class="o">,</span> <span class="n">operator</span> <span class="o">=</span> <span class="nc">In</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">distinct</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
            <span class="nd">@Spec</span><span class="o">.</span><span class="na">RequestHeader</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"region"</span><span class="o">,</span> <span class="n">path</span> <span class="o">=</span> <span class="s">"organization.region"</span><span class="o">)</span>
            <span class="nd">@Spec</span><span class="o">.</span><span class="na">AccessControl</span><span class="o">(</span><span class="n">path</span> <span class="o">=</span> <span class="s">"organization.region"</span><span class="o">,</span> <span class="n">valueSupplier</span> <span class="o">=</span> <span class="nc">UserAllowedRegions</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">operator</span> <span class="o">=</span> <span class="nc">In</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
            <span class="nc">Specification</span><span class="o">&lt;</span><span class="nc">DummyEntity</span><span class="o">&gt;</span> <span class="n">specification</span><span class="o">,</span>
            <span class="nc">Pageable</span> <span class="n">pageable</span>
    <span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">service</span><span class="o">.</span><span class="na">findAll</span><span class="o">(</span><span class="n">specification</span><span class="o">,</span> <span class="n">pageable</span><span class="o">)</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">mapper:</span><span class="o">:</span><span class="n">toDto</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h1 id="how-it-works">How it works</h1>

<ol>
  <li>
    <p>Annotate a <code class="language-plaintext highlighter-rouge">Specification&lt;T&gt;</code> method parameter with one or more source annotations:</p>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">@Spec.RequestParam</code> â€” query parameter</li>
      <li><code class="language-plaintext highlighter-rouge">@Spec.RequestHeader</code> â€” HTTP header</li>
      <li><code class="language-plaintext highlighter-rouge">@Spec.PathVariable</code> â€” URI path variable</li>
      <li><code class="language-plaintext highlighter-rouge">@Spec.AccessControl</code> â€” security-based, no request value needed</li>
    </ul>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">SpecArgumentResolver</code>:</p>

    <ul>
      <li>Reads the values from the HTTP request or security context.</li>
      <li>Converts them using <strong>Springâ€™s ConversionService</strong>.</li>
      <li>Passes them to the chosen operator.</li>
    </ul>
  </li>
  <li>
    <p>An operator implements:</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">SpecOperator</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">Y</span><span class="o">,</span> <span class="no">V</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="nc">Specification</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">buildSpecification</span><span class="o">(</span><span class="nc">SpecContext</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">Y</span><span class="o">,</span> <span class="no">V</span><span class="o">&gt;</span> <span class="n">ctx</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>All generated specifications are combined with <strong>AND</strong> logic.</p>
  </li>
</ol>

<h1 id="built-in-operators">Built-in operators</h1>

<ul>
  <li>Equal, NotEqual</li>
  <li>In, NotIn</li>
  <li>Contains, ContainsIgnoreCase</li>
  <li>StartWith, StartWithIgnoreCase</li>
  <li>IsNull, IsNotNull</li>
  <li>GreaterThan, GreaterThanOrEqualTo, LessThan, LessThanOrEqualTo</li>
</ul>

<p><strong>You can also implement custom operators.</strong></p>

<h1 id="access-control--security">Access control / security</h1>

<p>Use <code class="language-plaintext highlighter-rouge">@Spec.AccessControl</code> for filters without request input, e.g., enforcing user-specific restrictions.</p>

<p><strong>Example:</strong></p>

<p>Value Supplier can be a <code class="language-plaintext highlighter-rouge">Supplier&lt;List&lt;String&gt;&gt;</code> that returns the allowed regions for the current user:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">class</span> <span class="nc">UserAllowedRegions</span> <span class="kd">implements</span> <span class="nc">Supplier</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;&gt;</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">UserService</span> <span class="n">userService</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">get</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">userService</span><span class="o">.</span><span class="na">getUserAllowedRegions</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Usage example:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Spec</span><span class="o">.</span><span class="na">AccessControl</span><span class="o">(</span>
        <span class="n">path</span> <span class="o">=</span> <span class="s">"organization.region"</span><span class="o">,</span>
        <span class="n">valueSupplier</span> <span class="o">=</span> <span class="nc">UserAllowedRegions</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
        <span class="n">operator</span> <span class="o">=</span> <span class="nc">In</span><span class="o">.</span><span class="na">class</span>
<span class="o">)</span>
</code></pre></div></div>

<p>This will automatically restrict queries to allowed regions for the current user.</p>

<h1 id="license">License</h1>

<p>The library is distributed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.</p>

    </article>
</div>

</main><footer class="site-footer">
    <div class="container footer-inner">
        <p class="copyright">Â© 2025 CARIOCHI.
            Powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://pages.github.com/">GitHub Pages</a>
        </p>
        <p class="contact">Contact: <a href="mailto:vadym@deineka.com">vadym@deineka.com</a></p>
    </div>
</footer>
<script src="/assets/js/toc.js"></script>
</body>
</html>
